<?xml version="1.0"?>
<!-- vim: set fenc=utf-8 et sts=4 ft=xml : -->
<launch>
    <arg name="bagfile" default="/data/rosbag/mission_2018-03-08-16-58-51_rewrite.bag"/>

    <param name="use_sim_time2" type="bool" value="true"/>

    <node
        pkg="rosbag"
        type="play"
        name="replay"
        args="/loitor_stereo_visensor/left/image_raw:=/left/image_raw
            /loitor_stereo_visensor/right/image_raw:=/right/image_raw
            --clock
            --loop
            --topics
                /loitor_stereo_visensor/left/image_raw
                /loitor_stereo_visensor/right/image_raw
            --bags $(arg bagfile)"
        output="screen">
     </node>

    <node
        pkg="gpuimageproc"
        type="gpuimageproc_node"
        name="stereo_cuda"
        ns="stereo_cuda"
        output="screen"
        >
        <remap to="/cam0/image_raw"
               from="left/image_raw"/>
        <remap to="/cam1/image_raw"
               from="right/image_raw"/>
        <remap to="/loitor_stereo_visensor/left/camera_info"
               from="left/camera_info"/>
        <remap to="/loitor_stereo_visensor/right/camera_info"
               from="right/camera_info"/>

        <param name="approximate_sync" type="bool" value="false"/>
        <param name="camera_info_file_left" type="str" value="/data/git/temp_ws/src/gpuimageproc/test/stereobm/euroc_left_scale_0.yaml"/>
        <param name="camera_info_file_right" type="str" value="/data/git/temp_ws/src/gpuimageproc/test/stereobm/euroc_right_scale_0.yaml"/>
    </node>
</launch>
